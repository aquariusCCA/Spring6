---
up:
  - "[[Spring6 課程描述]]"
  - "[[Spring入门]]"
---
笔记小结：通过XML方式，实现Bean的自动注入的基本用例原理

> 1. 创建对象时，会调用**无参构造**方法
> 2. Spring 是通过**反射机制**调用无参构造方法**创建对象**
> 3. Spring 创建的对象（Bean对象），最终存储在**Spring容器**中

# 创建对象时，会调用**无参构造**方法

```java
public class HelloWorld {
    public HelloWorld() {
        System.out.println("无参数构造方法执行");
    }
    public void sayHello(){
        System.out.println("helloworld");
    }
}
```

![[87e93bd399f0c2891818e1e13964efe9.png]]

---

# Spring 是通过**反射机制**调用无参构造方法创建对象

```java
// dom4j解析beans.xml文件，从中获取class属性值，类的全类名
// 通过反射机制调用无参数构造方法创建对象
Class clazz = Class.forName("com.atguigu.spring6.bean.HelloWorld");

//Object obj = clazz.newInstance();
Object object = clazz.getDeclaredConstructor().newInstance();
```

---

# Spring 创建的对象（Bean对象），最终存储在**Spring容器**中

```java
private final Map<String, BeanDefinition> beanDefinitionMap = new ConcurrentHashMap<>(256);
```

Spring容器底层就是一个map集合

存储bean的map在DefaultListableBeanFactory类中

Spring容器加载到Bean类时 , 会把这个类的描述信息, 以包名加类名的方式存到beanDefinitionMap 中

Map<String,BeanDefinition> , 其中 String是Key , 默认是类名首字母小写 。

BeanDefinition , 存的是类的定义(描述信息) , 我们通常叫BeanDefinition接口为 bean 的定义对象。

![[a938e034dbf966aba49a8f4740709d9c.png]]

---